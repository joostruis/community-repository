
{{- define "cr.packages" }} 

{{- $ := index . 0 }}

{{- $packages := list }}

{{- with index . 1 }}

{{- if .Values.requires }}
{{- range .Values.requires }}

{{- include "cr.dump" . }}

{{- $category := .category }}
{{- $name := .name }}

{{- range $.packages }}
{{- if and (eq .category $category) (eq .name $name) }}



{{- end }}

{{- end }}

{{- $package := printf "\"%s-%s\"" .Values.category .Values.name }}
{{- if not (has $package $packages) }}
{{- $packages = $package | append $packages }}
{{- end }}

{{- end }}
{{- end }}

{{- end }}

{{- join " " $packages }}

{{- end }}


#########
# debug
#########
{{- define "cr.dump" }}
{{- . | printf "\nThe output of the dumped var is: \n%s" | fail }}
{{- end }}

{{- define "cr.dumpJson" }}
{{- . | toPrettyJson | printf "\nThe JSON output of the dumped var is: \n%s" | fail }}
{{- end }}
